<?xml version="1.0" encoding="UTF-8"?>
<!--<beans xmlns="http://www.springframework.org/schema/beans"-->
<!--       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"-->
<!--       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">-->

<!--</beans>-->
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.e114.e114_eumyuratodemo1.jdbc.AdminMemberDAO">
    <select id="getArtistMembers" resultType="com.e114.e114_eumyuratodemo1.dto.ArtistMemberDTO">
        select id, name, nid, sex, birth, phone
        from artist_member
    </select>

    <select id="getCommonMembers" resultType="com.e114.e114_eumyuratodemo1.dto.CommonMemberDTO">
        select id, name, nid, sex, birth, phone
        from common_member
    </select>

    <select id="getEntMembers" resultType="com.e114.e114_eumyuratodemo1.dto.EnterpriseMemberDTO">
        select id, name, num, email, phone
        from enterprise_member
    </select>

    <select id="searchArtistMembers" parameterType="map" resultType="com.e114.e114_eumyuratodemo1.dto.ArtistMemberDTO">
        SELECT id, name, nid, sex, birth, phone FROM artist_member
        WHERE ${column} LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="searchCommonMembers" parameterType="map" resultType="com.e114.e114_eumyuratodemo1.dto.CommonMemberDTO">
        SELECT id, name, nid, sex, birth, phone FROM common_member
        WHERE ${column} LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <select id="searchEntMembers" parameterType="map" resultType="com.e114.e114_eumyuratodemo1.dto.EnterpriseMemberDTO">
        SELECT id, name, num, email, phone FROM enterprise_member
        WHERE ${column2} LIKE CONCAT('%', #{keyword2}, '%')
    </select>

    <select id="getReservationList" resultType="com.e114.e114_eumyuratodemo1.dto.ReservationDTO">
        SELECT * FROM reservation
    </select>

    <select id="searchReservations" parameterType="map" resultType="com.e114.e114_eumyuratodemo1.dto.ReservationDTO">
        SELECT id, sid, cid, payTime, viewDate, memberNum, reservPay
        FROM reservation
        WHERE 1 = 1
        <if test="column == 'cid'">
            AND cid = #{keyword}
        </if>
        <if test="column == 'sid'">
            AND sid = #{keyword}
        </if>
    </select>
    
    <select id="getAdminInfoById" resultType="com.e114.e114_eumyuratodemo1.dto.EnterpriseMemberDTO">
        SELECT id, pwd, name, num, email, phone
        FROM enterprise_member
        WHERE id = #{adminId} AND adminNum = 0
    </select>

    <select id="getBuskings" resultType="com.e114.e114_eumyuratodemo1.dto.BuskingDTO">
        select * from busking
    </select>

    <select id="getSmallConcerts" resultType="com.e114.e114_eumyuratodemo1.dto.SmallConcertDTO">
        select * from small_concert
    </select>

    <select id="getLocalFestivals" resultType="com.e114.e114_eumyuratodemo1.dto.LocalFestivalDTO">
        select * from local_festival
    </select>

    <delete id="deleteBusking">
        DELETE FROM busking WHERE id = #{param1}
    </delete>

    <delete id="deleteSmallConcert">
        DELETE FROM small_concert WHERE id = #{param1}
    </delete>

    <delete id="deleteLocalFestival">
        DELETE FROM local_festival WHERE id = #{param1}
    </delete>


</mapper>